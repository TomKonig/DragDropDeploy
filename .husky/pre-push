#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

if [ "$SKIP_HOOKS" = "1" ]; then
  echo "[husky] pre-push skipped via SKIP_HOOKS=1" >&2
  exit 0
fi

echo "[husky] Ensuring base branch fetched (develop)..."
git fetch origin develop:refs/remotes/origin/develop --depth=1 || true

if [ -z "$GH_TOKEN" ]; then
  echo "[husky] GH_TOKEN not set â€“ docs:check may skip GitHub-auth steps or fail if required." >&2
fi

echo "[husky] Running full CI parity pipeline (ci:full) locally..."
npm run ci:full || exit 1
